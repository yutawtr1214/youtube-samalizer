# 技術コンテキスト

## 開発環境

### 言語とバージョン
- Python 3.9以上
  - 型ヒントのサポート
  - 最新の機能の利用
  - 広範なライブラリサポート

### 主要ライブラリ

#### 1. コアライブラリ
- google-genai
  - バージョン: 0.3.2以上
  - 用途: Gemini APIクライアント
  - 主要機能:
    - モデル管理
    - プロンプト処理
    - レスポンスハンドリング

- click
  - バージョン: 8.0以上
  - 用途: CLIインターフェース構築
  - 主要機能:
    - コマンド引数処理
    - オプション管理
    - ヘルプメッセージ生成

#### 2. ユーティリティライブラリ
- python-dotenv
  - バージョン: 1.0以上
  - 用途: 環境変数管理
  - 機能: 設定ファイル読み込み

- requests
  - バージョン: 2.31以上
  - 用途: HTTP通信
  - 機能: APIリクエスト処理

#### 3. 開発支援ライブラリ
- pytest
  - バージョン: 7.0以上
  - 用途: テスト実行
  - 機能:
    - ユニットテスト
    - 統合テスト
    - モック機能

- black
  - バージョン: 23.0以上
  - 用途: コードフォーマット
  - 設定: line-length=88

- isort
  - バージョン: 5.0以上
  - 用途: インポート整理
  - 設定: black互換モード

- mypy
  - バージョン: 1.0以上
  - 用途: 静的型チェック
  - 設定: strict mode

## APIとサービス

### 1. Gemini API
- 使用モデル
  - gemini-2.0-flash（デフォルト）
    - 用途: 高速な要約生成
    - 特徴: 短い応答時間
  - gemini-pro
    - 用途: 詳細な分析
    - 特徴: より高品質な要約
  - gemini-pro-vision
    - 用途: 視覚要素を考慮した要約
    - 特徴: マルチモーダル処理

- 認証方式
  - API Key認証 (変更: Vertex AI経由からAPIキー方式へ)
  - 環境変数での管理

- 制限事項
  - レート制限: 考慮必要
  - トークン制限: モデルごとに異なる
  - コスト: 使用量に応じた課金

### 2. YouTube Data API
- 使用範囲
  - 動画情報取得
  - メタデータ収集

- 認証
  - 不要（公開動画のみ対象）

- 制限事項
  - レート制限あり
  - エラーハンドリング必須

## 開発プラクティス

### 1. コーディング規約
- スタイルガイド: PEP 8準拠
- ドキュメント: Google Style Python Docstrings
- 型ヒント: 必須
- 命名規則
  - クラス: UpperCamelCase
  - 関数・変数: snake_case
  - 定数: UPPER_CASE

### 2. バージョン管理
- システム: Git
- ブランチ戦略
  - main: 製品版
  - develop: 開発版
  - feature/*: 機能開発
  - fix/*: バグ修正

- コミットメッセージ規約
```
<type>: <description>

[optional body]
[optional footer]
```
  - type: feat, fix, docs, style, refactor, test, chore

### 3. テスト戦略
- 単体テスト
  - 責務: 個々の関数・メソッドのテスト
  - ツール: pytest
  - カバレッジ目標: 90%以上

- 統合テスト
  - 責務: コンポーネント間の連携テスト
  - 対象: 主要ユースケース
  - モック利用: 外部API呼び出し

- E2Eテスト
  - 責務: 実際のユースケースのテスト
  - 対象: コマンドライン操作
  - 環境: 本番相当

### 4. セキュリティ要件
- API キー管理
  - 環境変数使用
  - .envファイルでの管理
  - .gitignoreでの除外

- エラーログ
  - 機密情報の除外
  - 適切なログレベル設定
  - ローテーション管理

### 5. パフォーマンス要件
- 応答時間
  - コマンド実行: 1秒以内
  - 要約生成: 30秒以内

- メモリ使用
  - 最大: 512MB以内
  - 通常時: 128MB以内

- CPU使用
  - ピーク時: 80%以下
  - 通常時: 30%以下